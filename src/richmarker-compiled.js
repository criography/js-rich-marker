function b(a){var c=a||{};this.f=this.c=!1;this.F=!!c.propagateClicks;void 0==a.visible&&(a.visible=!0);void 0==a.shadow&&(a.shadow="7px -3px 5px rgba(88,88,88,0.7)");void 0==a.anchor&&(a.anchor=f.BOTTOM);this.setValues(c)}b.prototype=new google.maps.OverlayView;window.RichMarker=b;b.prototype.getVisible=function(){return this.get("visible")};b.prototype.getVisible=b.prototype.getVisible;b.prototype.setVisible=function(a){this.set("visible",a)};b.prototype.setVisible=b.prototype.setVisible;
b.prototype.J=function(){this.c&&(this.a.style.display=this.getVisible()?"":"none",this.draw())};b.prototype.visible_changed=b.prototype.J;b.prototype.H=function(a){this.set("flat",!!a)};b.prototype.setFlat=b.prototype.H;b.prototype.u=function(){return this.get("flat")};b.prototype.getFlat=b.prototype.u;b.prototype.C=function(){return this.get("width")};b.prototype.getWidth=b.prototype.C;b.prototype.B=function(){return this.get("height")};b.prototype.getHeight=b.prototype.B;
b.prototype.I=function(a){this.set("shadow",a);this.i()};b.prototype.setShadow=b.prototype.I;b.prototype.v=function(){return this.get("shadow")};b.prototype.getShadow=b.prototype.v;b.prototype.i=function(){this.c&&(this.a.style.boxShadow=this.a.style.webkitBoxShadow=this.a.style.MozBoxShadow=this.u()?"":this.v())};b.prototype.flat_changed=b.prototype.i;b.prototype.setZIndex=function(a){this.set("zIndex",a)};b.prototype.setZIndex=b.prototype.setZIndex;b.prototype.getZIndex=function(){return this.get("zIndex")};
b.prototype.getZIndex=b.prototype.getZIndex;b.prototype.K=function(){this.getZIndex()&&this.c&&(this.a.style.zIndex=this.getZIndex())};b.prototype.zIndex_changed=b.prototype.K;b.prototype.getDraggable=function(){return this.get("draggable")};b.prototype.getDraggable=b.prototype.getDraggable;b.prototype.setDraggable=function(a){this.set("draggable",!!a)};b.prototype.setDraggable=b.prototype.setDraggable;b.prototype.o=function(){this.c&&(this.getDraggable()?g(this,this.a):h(this))};
b.prototype.draggable_changed=b.prototype.o;b.prototype.getPosition=function(){return this.get("position")};b.prototype.getPosition=b.prototype.getPosition;b.prototype.setPosition=function(a){this.set("position",a)};b.prototype.setPosition=b.prototype.setPosition;b.prototype.D=function(){this.draw()};b.prototype.position_changed=b.prototype.D;b.prototype.s=function(){return this.get("anchor")};b.prototype.getAnchor=b.prototype.s;b.prototype.G=function(a){this.set("anchor",a)};
b.prototype.setAnchor=b.prototype.G;b.prototype.A=function(){this.draw()};b.prototype.anchor_changed=b.prototype.A;function k(a){var c=document.createElement("DIV");c.innerHTML=a;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(a=document.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);return a}function m(a){if(a)for(var c;c=a.firstChild;)a.removeChild(c)}b.prototype.setContent=function(a){this.set("content",a)};b.prototype.setContent=b.prototype.setContent;
b.prototype.getContent=function(){return this.get("content")};b.prototype.getContent=b.prototype.getContent;
b.prototype.m=function(){if(this.b){m(this.b);var a=this.getContent();if(a){"string"==typeof a&&(a=a.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),a=k(a));this.b.appendChild(a);for(var c=this,a=this.b.getElementsByTagName("IMG"),d=0,e;e=a[d];d++)google.maps.event.addDomListener(e,"mousedown",function(a){c.getDraggable()&&(a.preventDefault&&a.preventDefault(),a.returnValue=!1)}),google.maps.event.addDomListener(e,"load",function(){c.draw()});google.maps.event.trigger(this,"domready")}this.c&&this.draw()}};
b.prototype.content_changed=b.prototype.m;function n(a,c){if(a.c){var d="";if(-1!==navigator.userAgent.indexOf("Gecko/"))"dragging"==c&&(d="-moz-grabbing"),"dragready"==c&&(d="-moz-grab");else if("dragging"==c||"dragready"==c)d="move";"draggable"==c&&(d="pointer");a.a.style.cursor!=d&&(a.a.style.cursor=d)}}
function p(a,c){if(a.getDraggable()&&!a.f){a.f=!0;var d=a.getMap();a.w=d.get("draggable");d.set("draggable",!1);a.j=c.clientX;a.l=c.clientY;n(a,"dragready");a.a.style.MozUserSelect="none";a.a.style.KhtmlUserSelect="none";a.a.style.WebkitUserSelect="none";a.a.unselectable="on";a.a.onselectstart=function(){return!1};q(a);google.maps.event.trigger(a,"dragstart")}}
function r(a){a.getDraggable()&&a.f&&(a.f=!1,a.getMap().set("draggable",a.w),a.j=a.l=a.w=null,a.a.style.MozUserSelect="",a.a.style.KhtmlUserSelect="",a.a.style.WebkitUserSelect="",a.a.unselectable="off",a.a.onselectstart=function(){},t(a),n(a,"draggable"),google.maps.event.trigger(a,"dragend"),a.draw())}
function u(a,c){if(a.getDraggable()&&a.f){var d=a.j-c.clientX,e=a.l-c.clientY;a.j=c.clientX;a.l=c.clientY;d=parseInt(a.a.style.left,10)-d;e=parseInt(a.a.style.top,10)-e;a.a.style.left=d+"px";a.a.style.top=e+"px";var l=v(a),d=new google.maps.Point(d-l.width,e-l.height);a.setPosition(a.getProjection().fromDivPixelToLatLng(d));n(a,"dragging");google.maps.event.trigger(a,"drag")}else r(a)}function h(a){a.h&&(google.maps.event.removeListener(a.h),delete a.h);n(a,"")}
function g(a,c){c&&(a.h=google.maps.event.addDomListener(c,"mousedown",function(c){p(a,c)}),n(a,"draggable"))}function q(a){a.a.setCapture?(a.a.setCapture(!0),a.g=[google.maps.event.addDomListener(a.a,"mousemove",function(c){u(a,c)},!0),google.maps.event.addDomListener(a.a,"mouseup",function(){r(a);a.a.releaseCapture()},!0)]):a.g=[google.maps.event.addDomListener(window,"mousemove",function(c){u(a,c)},!0),google.maps.event.addDomListener(window,"mouseup",function(){r(a)},!0)]}
function t(a){if(a.g){for(var c=0,d;d=a.g[c];c++)google.maps.event.removeListener(d);a.g.length=0}}
function v(a){var c=a.s();if("object"==typeof c)return c;var d=new google.maps.Size(0,0);if(!a.b)return d;var e=a.b.offsetWidth;a=a.b.offsetHeight;switch(c){case f.TOP:d.width=-e/2;break;case f.TOP_RIGHT:d.width=-e;break;case f.LEFT:d.height=-a/2;break;case f.MIDDLE:d.width=-e/2;d.height=-a/2;break;case f.RIGHT:d.width=-e;d.height=-a/2;break;case f.BOTTOM_LEFT:d.height=-a;break;case f.BOTTOM:d.width=-e/2;d.height=-a;break;case f.BOTTOM_RIGHT:d.width=-e,d.height=-a}return d}
b.prototype.onAdd=function(){this.a||(this.a=document.createElement("DIV"),this.a.style.position="absolute");this.getZIndex()&&(this.a.style.zIndex=this.getZIndex());this.a.style.display=this.getVisible()?"":"none";if(!this.b){this.b=document.createElement("DIV");this.a.appendChild(this.b);var a=this;google.maps.event.addDomListener(this.b,"click",function(c){a.F||(c.stopPropagation?c.stopPropagation():c.returnValue=!1);google.maps.event.trigger(a,"click")});google.maps.event.addDomListener(this.b,
"mouseover",function(){google.maps.event.trigger(a,"mouseover")});google.maps.event.addDomListener(this.b,"mouseout",function(){google.maps.event.trigger(a,"mouseout")})}this.c=!0;this.m();this.i();this.o();var c=this.getPanes();c&&c.overlayMouseTarget.appendChild(this.a);google.maps.event.trigger(this,"ready")};b.prototype.onAdd=b.prototype.onAdd;
b.prototype.draw=function(){if(this.c&&!this.f){var a=this.getProjection();if(a){var c=this.get("position"),a=a.fromLatLngToDivPixel(c),c=v(this);this.a.style.top=a.y+c.height+"px";this.a.style.left=a.x+c.width+"px";a=this.b.offsetHeight;c=this.b.offsetWidth;c!=this.get("width")&&this.set("width",c);a!=this.get("height")&&this.set("height",a)}}};b.prototype.draw=b.prototype.draw;b.prototype.onRemove=function(){this.a&&this.a.parentNode&&this.a.parentNode.removeChild(this.a);h(this)};
b.prototype.onRemove=b.prototype.onRemove;var f={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=f;